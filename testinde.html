<!DOCTYPE html>
<html lang="en">
	<head>
		<script src="http://code.jquery.com/jquery-3.3.1.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.9.1/d3.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/techan.js/0.8.0/techan.min.js"></script>
		<script src="identikit.js"></script>
		<script src="watchtower.js"></script>
	</head>
	hi
	<meta charset="utf-8" />
   <link rel="stylesheet" type="text/css" href="stylesheet.css">
	<div id="cont" style="width:480px; height: 300px;">

	</div>
	<script>

		AJAXRequest = function(url, callback, failCallback) {
		  var xmlhttp = new XMLHttpRequest();

		  // @see http://blogs.msdn.com/b/ie/archive/2012/02/09/cors-for-xhr-in-ie10.aspx
		  // @see http://bionicspirit.com/blog/2011/03/24/cross-domain-requests.html
		  // @see http://msdn.microsoft.com/en-us/library/ie/cc288060(v=vs.85).aspx
		  if ("withCredentials" in xmlhttp) {
		    // for Chrome, Firefox, Opera
		    xmlhttp.onreadystatechange = function() {
		      if (xmlhttp.readyState == 4) {
		        if (xmlhttp.status == 200 || xmlhttp.status == 304) {
		          callback(xmlhttp.responseText);
		        } else {
		          setTimeout(failCallback, 0);
		        }
		      }
		    }

		    xmlhttp.open("GET", url, true);
		    xmlhttp.send();
		  } else {
		    // for IE
		    var xdr = new XDomainRequest();
		    xdr.onerror = function(){setTimeout(failCallback, 0);};
		    xdr.ontimeout = function(){setTimeout(failCallback, 0);};
		    xdr.onload = function() {
		      callback(xdr.responseText);
		    };

		    xdr.open("get", url);
		    xdr.send();
		  }
		};

		AJAXRequest("https://query1.finance.yahoo.com/v7/finance/chart/AAPL?&interval=5m&range=1d", function(c){console.log(c)}, function(c){console.log(c)});
		watchtower.yahoo_finance.lengthRange("AAPL", "5m", "1d").then(function(data){
			console.log(data);
			identikit.render_simple_chart("#cont", data);
		});
	</script>
</html>
